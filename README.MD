# ğŸ•’ Python Job Scheduler mit TOML-Konfiguration

Dieser Job Scheduler startet Python-Skripte gemÃ¤ÃŸ einer konfigurierbaren Zeitplanung in `.toml`-Dateien. Er unterstÃ¼tzt virtuelle Umgebungen (venv), Live-Reload bei Config-Ã„nderungen und Logging in Datei und Konsole.

## ğŸš€ Features

- Zeitgesteuerte AusfÃ¼hrung von Scripts via `schedule`
- Konfigurierbar Ã¼ber TOML-Dateien (pro Job)
- UnterstÃ¼tzung fÃ¼r virtuelle Python-Umgebungen (venv)
- Live-Reload bei Config-Ã„nderungen via `watchdog`
- Logging mit Rotation (Konsole + `logs/scheduler.log`)
- System-Tray-Icon (optional)
- UnterstÃ¼tzung fÃ¼r:
  - tÃ¤gliche AusfÃ¼hrungen
  - mehrmals tÃ¤glich (multi_daily)
  - wÃ¶chentliche Jobs (z.â€¯B. freitags 18:00)
  - monatliche Jobs
  - Intervalle wie `every_5_minutes`, `every_2_hours` etc.

## ğŸ“¦ Installation

```bash
pip install -r requirements.txt
```

> Falls noch nicht vorhanden: Lege einen `config/`-Ordner an und darin eine `global.toml` und beliebige Job-Dateien (`jobname.toml`).

## ğŸ“ Verzeichnisstruktur

```
projekt/
â”œâ”€â”€ scheduler/
â”‚   â””â”€â”€ tray_icon.py        # Optionales Tray Icon
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ global.toml         # Globale Einstellungen
â”‚   â””â”€â”€ mein_job.toml       # Ein Job
â”œâ”€â”€ logs/
â”‚   â””â”€â”€ scheduler.log       # Logfile (automatisch angelegt)
â”œâ”€â”€ job_scheduler.py        # Hauptprogramm
â””â”€â”€ requirements.txt
```

## âš™ï¸ Beispiel-Config fÃ¼r einen wÃ¶chentlichen Job

```toml
[metadata]
name = "woechentlicher_report"
enabled = true

[execution]
script = "scripts/weekly_report.py"
frequency = "weekly"
day = "friday"
time = "18:00"
venv = "venvs/report_env"
config = "configs/report_config.toml"
```

Die frequency kann "daily", "multi_daily", "weekly", "monthly" sein. Bei "multi_daily" musst du statt "time" ein Array von times mitgeben, z.B. ```times = ["12:00", "14:00"]```


## ğŸ› ï¸ Globale Konfiguration (`config/global.toml`)

```toml
[global]
default_venv = "venvs/default_env"
```

Wenn kein `venv` im Job definiert ist, wird dieses als Fallback verwendet.

## â–¶ï¸ Starten (NICHT im VSCode - auÃŸerhalb in einer CMD-Shell)

```bash
python job_scheduler.py
```

alternativ
```bash
python -m scheduler.scheduler
```

## ğŸ”„ Automatischer Reload

Wenn sich eine `.toml`-Datei im `config/`-Ordner Ã¤ndert, wird der Scheduler den Job automatisch neu laden oder anlegen.

## ğŸ“Œ Hinweise

- Der Arbeitsordner (`cwd`) fÃ¼r jedes Script wird automatisch auf dessen Speicherort gesetzt.
- Log-Ausgaben landen in `logs/scheduler.log` mit Rotation (max. 5 MB, 5 Dateien).
- Scripts sollten eigene relative Pfade mÃ¶glichst mit `Path(__file__).parent` auflÃ¶sen.

## ğŸ“‹ Lizenz

MIT License â€“ frei verwendbar mit Namensnennung.

---

ğŸ§‘â€ğŸ’» Viel SpaÃŸ beim Automatisieren!
